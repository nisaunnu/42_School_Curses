# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: nunnu <nunnu@student.42kocaeli.com.tr>     +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2023/11/22 02:51:01 by nunnu             #+#    #+#              #
#    Updated: 2023/12/06 20:44:20 by nunnu            ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME = fractol

# ----- LIBRARY ----- #
HEADER  = fractol.h
MLX_LIB = $(MLX_PATH)/libmlx.a

# ----- PATH ----- #
MLX_PATH = ./mlx_opengl
INC_PATH = -I$(MLX_PATH) -I$(HEADER)

# ----- SOURCE & OBJECT FILES ----- #
SRC  = main.c 						\
	   draw.c 						\
	   mandelbrot.c 				\
	   julia.c 						\
	   parsing.c 					\
	   setup.c 						\
	   events.c 					\
	   burning_ship.c 				\
	   libft_utils.c
OBJ = $(SRC:.c=.o)

# ----- COMPILING VARIABLES ----- #
CC        = gcc
CFLAGS    = -Wall -Wextra -Werror
MLX_FLAGS = -L$(MLX_PATH) -lmlx -framework OpenGL -framework AppKit

# ----- COLORS ----- #
GREEN   = \033[32;1m
RED     = \033[31;49;1m
YELLOW  = \033[33;49;1m
CYAN    = \033[36;1m
RESET   = \033[0m

all: mandatory

.c.o:
	@ ${CC} ${FLAGS} -c $< -o ${<:.c=.o}

mandatory: $(OBJ)
	@ echo "\n	游리$(YELLOW) Compilation of $(NAME) ... $(RESET)"

	@ $(MAKE) -sC $(MLX_PATH) >/dev/null 2>&1
	@ echo "\n	游릭$(GREEN) minilibx created $(RESET)"

	@ $(CC) -o $(NAME) $(OBJ) $(MLX_FLAGS)
	@ echo "\n	游릭$(GREEN) $(NAME) created $(RESET)\n"

bonus: all
	@ echo "	游릭$(GREEN) bonus created $(RESET)\n"

norm:
	@ echo "\n"
	@ norminette $(SRC) $(HEADER); \
	if [ $$? -eq 0 ]; then \
		echo "\n游릭$(GREEN) Norminette check passed!$(RESET)\n\n"; \
	else \
		echo "\n游댮$(RED) Norminette check failed!$(RESET)\n\n"; \
	fi

clean:
	@ $(MAKE) -sC $(MLX_PATH) clean
	@ rm -rf *.o
	@ echo "\n	游댮$(RED) Delete : objects $(RESET)\n"

fclean: clean
	@ rm -f $(MLX_LIB)
	@ echo "	游댮$(RED) Delete : $(MLX_LIB) $(RESET)"
	@ rm -f $(NAME)
	@ echo "\n	游댮$(RED) Delete : $(NAME) $(RESET)\n"

re: fclean all

.PHONY: all clean fclean re
